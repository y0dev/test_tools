# Device Runner - User Input Capture Feature

## 🎯 **Complete Parameter Traceability**

The Device Runner now captures **all user inputs** along with RAM data, providing complete traceability and reproducibility for your FPGA application testing.

### ✅ **User Input Capture Features**

#### **1. Complete Parameter Recording**
- **Raw Parameters**: Original user input values
- **Formatted Parameters**: Properly formatted hexadecimal values
- **Parameter Details**: Individual analysis of each parameter
- **Timestamp**: Exact time when parameters were used

#### **2. Automatic File Generation**
- **user_inputs.txt**: Detailed parameter information
- **capture_summary.txt**: Complete summary including parameters
- **capture_ram.tcl**: TCL script with parameter comments
- **Binary Files**: RAM data with parameter context

#### **3. Reproducibility Support**
- **Exact Parameters**: Know exactly what was used for each run
- **Parameter Validation**: See how parameters were processed
- **Formatted Output**: Ready-to-use parameter strings
- **Timestamp Correlation**: Link parameters to specific runs

## 📁 **Enhanced Output Structure**

```
output/
├── device_runner.log              # Main log file
├── capture_20241201_143022/       # Timestamped capture folder
│   ├── user_inputs.txt             # NEW: User parameters used
│   ├── capture_ram.tcl             # Generated capture script
│   ├── capture_summary.txt         # Enhanced summary with parameters
│   ├── DDR_LOW_0x00000000.bin      # DDR low memory region
│   ├── DDR_MID_0x00100000.bin      # DDR mid memory region
│   ├── DDR_HIGH_0x00200000.bin     # DDR high memory region
│   ├── GPIO_REGION_0x40000000.bin  # GPIO register region
│   └── AXI_REGION_0x43C00000.bin   # AXI peripheral region
└── capture_20241201_150145/       # Next capture folder
    └── ...
```

## 📋 **User Inputs File Example**

### **user_inputs.txt**
```
User Input Parameters
====================
Timestamp: 2024-12-01 14:30:22

Parameter 1: 0x40000000
Parameter 2: 0x43C00000
Parameter 3: 0x00001000

Formatted Parameters:
  0x40000000 0x43C00000 0x00001000

Parameter Details:
  Parameter 1: 0x40000000 (hex: 0x40000000)
  Parameter 2: 0x43C00000 (hex: 0x43C00000)
  Parameter 3: 0x00001000 (hex: 0x00001000)
```

## 📊 **Enhanced Capture Summary**

### **capture_summary.txt**
```
RAM Data Capture Summary
========================
Timestamp: 2024-12-01 14:30:22
Capture Directory: output/capture_20241201_143022

User Input Parameters:
  Parameter 1: 0x40000000
  Parameter 2: 0x43C00000
  Parameter 3: 0x00001000
  Formatted: 0x40000000 0x43C00000 0x00001000

Captured Regions:
- DDR_LOW (0x00000000, 1MB)
- DDR_MID (0x00100000, 1MB)
- DDR_HIGH (0x00200000, 1MB)
- GPIO_REGION (0x40000000, 4KB)
- AXI_REGION (0x43C00000, 4KB)

Files Generated:
- user_inputs.txt (user parameters)
- capture_ram.tcl (capture script)
- DDR_LOW_0x00000000.bin
- DDR_MID_0x00100000.bin
- DDR_HIGH_0x00200000.bin
- GPIO_REGION_0x40000000.bin
- AXI_REGION_0x43C00000.bin
- capture_summary.txt (this file)
```

## 🔧 **Technical Implementation**

### **Enhanced Function Signature**
```tcl
DeviceRunner::capture_ram_data(output_dir, console_widget, log_file, xsdb_path, jtag_tcp, param1, param2, param3)
```

### **Parameter Processing**
```tcl
# Save user inputs to capture directory
set inputs_file [file join $capture_dir "user_inputs.txt"]
set fp [open $inputs_file w]
puts $fp "User Input Parameters"
puts $fp "===================="
puts $fp "Timestamp: [clock format [clock seconds] -format "%Y-%m-%d %H:%M:%S"]"
puts $fp ""
puts $fp "Parameter 1: $param1"
puts $fp "Parameter 2: $param2"
puts $fp "Parameter 3: $param3"
puts $fp ""
puts $fp "Formatted Parameters:"
set formatted_params [format_integer_params $param1 $param2 $param3]
puts $fp "  $formatted_params"
puts $fp ""
puts $fp "Parameter Details:"
if {$param1 != ""} {
    puts $fp "  Parameter 1: $param1 (hex: [format_hex_32bit $param1])"
}
if {$param2 != ""} {
    puts $fp "  Parameter 2: $param2 (hex: [format_hex_32bit $param2])"
}
if {$param3 != ""} {
    puts $fp "  Parameter 3: $param3 (hex: [format_hex_32bit $param3])"
}
close $fp
```

### **TCL Script Enhancement**
```tcl
# RAM Data Capture Script
# Generated by Device Runner
# Timestamp: 2024-12-01 14:30:22
# User Parameters: 0x40000000 0x43C00000 0x00001000
```

## 🎯 **Benefits of User Input Capture**

### **Complete Traceability**
- **Parameter History**: Know exactly what parameters were used
- **Run Correlation**: Link parameters to specific RAM captures
- **Reproducibility**: Recreate exact conditions for testing
- **Documentation**: Automatic documentation of test parameters

### **Analysis Support**
- **Parameter Validation**: See how parameters were processed
- **Format Verification**: Confirm proper hexadecimal formatting
- **Value Tracking**: Track parameter changes over time
- **Error Debugging**: Identify parameter-related issues

### **Professional Workflow**
- **Test Documentation**: Complete test parameter records
- **Quality Assurance**: Verify parameter correctness
- **Compliance**: Meet documentation requirements
- **Audit Trail**: Complete parameter usage history

## 🚀 **Usage Examples**

### **Basic Workflow with Parameter Capture**
1. Launch Device Runner
2. Enter parameters:
   - Parameter 1: `0x40000000`
   - Parameter 2: `0x43C00000`
   - Parameter 3: `0x00001000`
3. Click "Run Complete Workflow"
4. Check `output/capture_YYYYMMDD_HHMMSS/user_inputs.txt`

### **Parameter Analysis**
```bash
# View user inputs for latest capture
cat output/capture_*/user_inputs.txt

# Compare parameters across runs
diff output/capture_20241201_143022/user_inputs.txt output/capture_20241201_150145/user_inputs.txt
```

### **Reproducibility**
```bash
# Recreate exact test conditions
# Use parameters from user_inputs.txt:
# Parameter 1: 0x40000000
# Parameter 2: 0x43C00000
# Parameter 3: 0x00001000
```

## 📋 **Common Parameter Examples**

### **Device Addresses**
- **GPIO Base**: `0x41200000`
- **UART Base**: `0xE0001000`
- **Timer Base**: `0xF8F00200`
- **DDR Base**: `0x00100000`

### **Configuration Values**
- **Enable**: `0x00000001`
- **Disable**: `0x00000000`
- **Reset**: `0x000000FF`
- **Clear**: `0xFFFFFFFF`

### **Buffer Sizes**
- **1KB**: `0x00000400`
- **4KB**: `0x00001000`
- **16KB**: `0x00004000`
- **64KB**: `0x00010000`

## 🎉 **Ready for Production**

The Device Runner now provides:
- **Complete Parameter Capture**: All user inputs saved automatically
- **Enhanced Traceability**: Know exactly what was used for each run
- **Professional Documentation**: Automatic parameter documentation
- **Reproducibility Support**: Recreate exact test conditions
- **Quality Assurance**: Verify parameter correctness and processing

Perfect for **professional FPGA application testing** with complete parameter traceability and reproducible results!
